# 1. Linux的组成

## 1.1 Linux内核
  
Linux内核是Linux系统的核心，并控制计算机系统的所有硬件和软件。
Linus Torvalds开发了Linux内核，早期，能否将建议代码并入内核最终取决于Linus时至今日，在Linux内核代码由一组开发人员负责这项任务，不再是Linus一个人了。

### 1.1.1 内核的功能

#### 1.1.1.1 系统内存管理

- 内存管理是操作系统的主要功能之一，内核不仅可以管理可用的物理内存，还可以创建并管理虚拟内存（实际并不存在的内存）。
- 内核通过硬盘上的交换空间（swap space）的来实现虚拟内存，内核在交换空间和实际的物理内存之间反复交换虚拟内存的内容,使得系统拥有比物理内存更多的可用内存。
- 内核会将每个内存页面至于物理内存和交换空间。内核会维护一张内存页面，指名位于物理内存或者交换到磁盘的页面（page）。
- 内核会记录使用中的内存页面，自动把一段时间未访问的内存页面复制到交换空间（称之为换出，swapping out），即使还有内存可用。当程序访问已被换出的页面，内核必须将物理内存中的另一个页面换出来为其腾出空间，然后从交换空间换入（swapping in）所请求的页面。

- 拓展概念：
  - 页面（page）：内存被划分为若干块，这些块称为页面（page）。
  - 换出（swapping out）：将存在于物理空间且一段时间未访问的内存页面复制到交换空间。
  - 换入（swapping in）：将存在于交换空间中并要访问的页面置于物理内存。

#### 1.1.1.2 软件程序管理

- 进程可以在前台运行，将输出显示在屏幕上，也可以在后台运行，隐藏在幕后。
- 内核创建了第一个进程（称为init进程）来启动系统中所有的其他进程。当内核启动时，它将会将init进程载入虚拟内存。内核在启动其他进程时，会在虚拟内存中给新进程分配一块专有区域来存储该进程用到的数据和代码。
  - init进程实现
    - SysVinit：Linux最初使用的是SysVinit（SysV）初始化方法，该方法基于Unix System V初始化方法。尽管如今很多Linux发行版已经不再使用SysVinit了，但在一些比较旧的Linux发行版中还能找到其身影。
    - systemd：systemd初始化方法诞生于2010年，现在已经成为Linux发行版中最流行的初始化和进程管理系统。

- 拓展概念：
  - 进程：运行中的程序。
  - init进程：系统启动的第一个进程，启动系统中的所有其他进程。
  
#### 1.1.1.3 硬件设备管理

- 任何Linux系统需要与之通信的设备都必须在内核代码中加入其驱动程序。
- 向Linux内核中插入设备驱动的方法
  - 将驱动程序编译入内核
    - 早期插入驱动程序的唯一途径，每次给系统添加设备都不得不重新编译一遍内核代码。
  - 将设备驱动模块加入内核
    - 允许在无需重新编译内核的情况下将驱动程序插入运行中的内核。当设备不再使用时也可以将内核模块从内核中移除。
- Linux系统将硬件设备视为一种特殊文件，称为设备文件。
  - 字符设备文件：对应只能处理一个字符的设备。
  - 块设备文件：对应每次以块形式处理数据的设备。
  - 网络设备文件：对应采用数据包发送和接收数据的设备。
- Linux会为系统的每个设备都创建一种称为“节点”的特殊文件。
  - 与设备的所有通信都是通过设备节点完成。
  - 每个节点都有一个唯一的数值对，供Linux内核标识。
- 拓展概念
  - 驱动程序：驱动程序相当于应用程序和硬件设备的“中间人”​，允许内核同设备之间交换数据。
  - 数值对包括一个主设备号和一个次设备号，类似的设备会被划分到相同的主设备号下。次设备号用于标识主设备组下的某个特定设备。

#### 1.1.1.4 文件系统管理

- Linux内核支持通过不同类型的文件系统读写硬盘数据。
- Linux内核采用虚拟文件系统（virtual file system，VFS）作为和各种文件系统交互的接口。这为Linux内核与其他类型文件系统之间的通信提供了一个标准接口。当文件系统被挂载和使用时，VFS会在内存中缓存相关信息。

## 1.2 GUN实用工具

### 1.2.1 核心GNU实用工具

GNU项目旨在为Unix系统管理员打造出一套可用的类Unix环境。这个目标促使该项目移植了很多常见的Unix系统命令行工具。

#### 1.2.1.1 GNU coreutils 软件包

供Linux系统使用的这组核心工具被称为coreutils（core utilities）软件包。

- GNU coreutils 软件包由3部分构成。
  - 文件实用工具
  - 文本实用工具
  - 进程实用工具

#### 1.2.1.2 shell

- GNU/Linux shell是一种特殊的交互式工具，为用户提供了启动程序、管理文件系统中的文件以及运行在Linux系统中的进程的途径。
- shell的核心是命令行提示符，负责shell的交互部分，允许用户输入文本命令，然后解释命令并在内核中执行。
- shell包含一组内部命令，可用于完成复制文件、移动文件、重命名文件、显示和终止系统中正在运行的程序这类操作。
- shell允许在命令行提示符中输入程序的名称，它会将程序名称传递给内核以启动程序。
- 所有Linux发行版默认的shell都是bash shell。bash shell由GNU项目开发，被作为标准Unix shell（Bourne shell，以其创建者得名）的替代品。

- 拓展概念：
  - GNU/Linux：Linus创建了Linux系统内核，但他手头并没有能够运行在内核之上的系统实用工具。GNU（GNU代表GNU's Not Unix）组织开发出了一套完整的Unix实用工具，但是缺少用于支撑其运行的内核系统。这些实用工具是在开源软件（open source software，OSS）理念下诞生的。Linus的Linux内核和GNU操作系统实用工具结合在一起，产生了一款完整且功能丰富的自由操作系统。
  - 开源软件理念：开源软件理念允许程序员开发软件并将其免费发布。所有人都可以使用、修改该软件，或将其集成进自己的系统，无须支付任何授权费用。
  - 供Linux系统使用的这组核心工具被称为coreutils（core utilities）软件包。
  - shell脚本：将多个shell命令放入文件中作为程序执行，这些文件称作shell脚本。

## 1.3 图形化界面环境
  
### 1.3.1 Linux最常用的两种显示协议

- X11
- Wayland

### 1.3.2 Linux常用的桌面环境

- KDE（K desktop environment，K桌面环境）
- GNOME（ GNU network object model environment，GNU网络对象模型环境）
- Cinnamon：Cinnamon桌面是由Linux Mint发行版于2011年开发的，旨在延续原先的GNOME 2桌面。
- MATE：MATE桌面是由讨厌GNOME 3的Arch Linux用户于2011年开发的。该桌面融入了一些GNOME 3的特性（比如替换了任务栏）​，但是维持了GNOME 2的整体观感。

## 1.4 应用软件
